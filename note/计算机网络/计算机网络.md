# 三次握手

1.第一次握手：客户端向服务端发送SYN报文，并指明客户端的初始化序列号 **ISN**，此时客户端属于**SYN_Send** 状态。

2.第二次握手：服务器收到客户端的 SYN 报文之后，会以自己的 SYN 报文作为应答，并且也是指定了自己的初始化序列号 ISN(s)，同时会把客户端的 ISN + 1 作为 ACK 的值，表示自己已经收到了客户端的 SYN，此时服务器处于 **SYN_REVD** 的状态。

3.第三次握手：客户端收到 SYN 报文之后，会发送一个 ACK 报文，当然，也是一样把服务器的 ISN + 1 作为 ACK 的值，表示已经收到了服务端的 SYN 报文，此时客户端处于 **establised** 状态。

4.服务器收到 ACK 报文之后，也处于 **establised 状态**，此时，双方以建立起了链接。

为什么要三次握手：为了实现可靠数据传输， TCP 协议的通信双方都必须维护一个序列号，两次握手只能确认发起方的起始序列号。第二次握手服务端不能确定客户端的接收信息正常。 


三次握手的作用：
   1、确认双方的接受能力、发送能力是否正常。
   2、指定自己的初始化序列号，为后面的可靠传送做准备。
   3、如果是 https 协议的话，三次握手这个过程，还会进行数字证书的验证以及加密密钥的生成到。

ps：第三次握手可以携带数据

补充：

​	1.位码：
​	ISN(初始化序列号，动态生成)，SYN(建立连接)，ACK(确认)，FIN(结束)，RST(重置)

​	2.半连接队列：

​	服务器第一次收到ISN后，会处于SYN_REVD状态，此时双方未完全建立连接，服务器会吧这种个状态下的请求连接放到一个队列中，这种队列叫半连接队列。三次握手后的会放到全连接队列中，队列满了会丢包。

​	3.SYN-ACK重传

​	服务器发送完SYN-ACK,如果未收到客户端确认包，会进行首次重传，过一段时间仍然未收到还会再次重传，直到到达重传次数上线，将该连接信息从半连接队列删除。

# 四次挥手

开始双方都处于连接状态，假设客户端发起关闭请求。

1.第一次挥手：客户端向服务端发送FIN报文，报文中指定一个序列号，客户端处于关闭等待状态。

2.第二次挥手：服务端收到FIN报文之后，会发送ACK报文（值为客户端序列号+1），表示接收到客户端的报文，此时客户端处于关闭等待状态。

3.第三次挥手：服务端也要断开连接，发送一个FIN报文，并指定一个序列号。

4.第四次挥手：客户端收到FIN之后，会发送一个ACK报文作为应答，且把服务端的序列号+1作为自己ACK报文的序列号，此时客户端处于TIME_WAIT状态，需要一段时间（2MSL(报文最大生存时间)）确保服务端收到自己的ACK报文之后才进入关闭状态。



短连接：连接—>传输数据—>关闭连接

长链接：连接—>传输数据—>保持连接—>传输数据—>。。。—>关闭连接

winsocket websocket



# http/https 协议get和post区别

（1）get请求，参数会在url上显示出来，post不会。

（2）post传输数据量大（2M）,get受url长度限制。

（3）get请求要注意缓存问题，post不需要。

（4）get方式请求的数据会被浏览器缓存起来，会有安全问题，post可以避免。

（5）发送请求时，get请求使用的send函数发送参数为null，post请求使用send方法需要赋予参数。





# TCP与UDP的区别（都是传输层协议）

1.TCP是面向连接的，UDP是无连接的。

2.TCP是可靠的，UDP是不可靠的。

3.TCP只支持点对点通信，UDP支持一对一、一对多、多对一、多对多的通信模式；

4.TCP是面向字节流的，UDP是面向报文的；

5.TCP有拥塞控制机制;UDP没有拥塞控制，适合媒体通信；



# OSI七层模型:

物理层 数据链路层 网络层  运输层  会话层  表示层  应用层



# TCP保证可靠性：

1.校验和，双方用同样的算法计算校验和

2.应答机制

3.超时重传

4.连接管理，三次握手四次挥手

5.流量控制：接受方返回ACK时，会把自己剩余缓冲区的大小填补进窗口字段中，发送方根据ACK报文里窗口值的大小改变自己的发送速度，如果为0，停止发送，并定期发送窗口探测数据段，得到接受方的窗口大小

6拥塞控制：慢启动机制，刚开始拥塞窗口为1，每次收到ACK应答拥塞窗口翻倍，发送数据前首先把拥塞 窗口与接受端反馈的窗口大小对比，选择较小的作为实际发送的窗口；设置一个拥塞窗口的阈值，当大小超过阈值时，由指数增长变为线性增长；在一开始，这个阈值时窗口的最大值，一旦发生超时重传，慢启动的阈值设置为原来的一半，同时拥塞窗口置为1；

7.面向字节流 

